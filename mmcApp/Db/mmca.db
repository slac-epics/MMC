record(mmca, "$(MOTOR)") {
  field(AXIS, "$(AXIS)")
  field(FLNK, "$(MOTOR):TS")
}

record(stringin, "$(MOTOR):TS") {
  field(DESC, "Time Stamp of Last Update")
  field(DTYP, "Soft Timestamp")
  field(TSEL, "$(MOTOR).TIME")
  field(INP,  "@%R:%S %b %d %Y")
  field(FLNK, "$(MOTOR):UTCS")
}

record(stringin, "$(MOTOR):UTCS") {
  field(DESC, "UTC String of Last Update")
  field(DTYP, "Soft Timestamp")
  field(TSEL, "$(MOTOR).TIME")
  field(INP,  "@%s")
  field(FLNK, "$(MOTOR):UTC")
}

record(scalcout, "$(MOTOR):UTC") {
  field(DESC, "UTC Seconds of Last Update")
  field(INAA, "$(MOTOR):UTCS")
  field(CALC, "INT(AA)")
}

record(stringout, "$(MOTOR):FWD_MEANS") {
  field(DESC, "Meaning of Forward")
  field(VAL,  "+")
  field(PINI, "YES")
}

record(stringout, "$(MOTOR):REV_MEANS") {
  field(DESC, "Meaning of Reverse")
  field(VAL,  "-")
  field(PINI, "YES")
}

record(stringout, "$(MOTOR):UPDATE_STATUS") {
  field(DESC, "Update Status")
  field(OMSL, "closed_loop")
  field(VAL,  "STUP")
  field(OUT,  "$(MOTOR).CMD")
}

record(stringout, "$(MOTOR):CLEAR_ERR") {
  field(DESC, "Clear Errors")
  field(OMSL, "closed_loop")
  field(VAL,  "CER")
  field(OUT,  "$(MOTOR).CMD")
  field(FLNK, "$(MOTOR):UPDATE_STATUS")
}

record(stringout, "$(MOTOR):ZERO_P") {
  field(DESC, "Set The Dial Position To 0")
  field(OMSL, "closed_loop")
  field(VAL,  "ZRO")
  field(OUT,  "$(MOTOR).CMD")
  field(FLNK, "$(MOTOR):UPDATE_STATUS")
}

record(longout, "$(MOTOR):SET_P_SELN") {
  field(DESC, "SET_P SELN Mask")
  field(OUT,  "$(MOTOR):SET_P.SELN")
  field(FLNK, "$(MOTOR):SET_P")
}

record(seq, "$(MOTOR):SET_P") {
  field(DESC, "Set Position")
  field(SELM, "Mask")
  field(DLY1, "0")
  field(DO1,  "1")
  field(LNK1, "$(MOTOR):ZERO_P.PROC")
  field(DLY2, "1")
  field(DO2,  "1")
  field(LNK2, "$(MOTOR).SET" )
  field(DLY3, "0")
  field(DO3,  "0")
  field(LNK3, "$(MOTOR).DVAL")
  field(DLY4, "0")
  field(DO4,  "0")
  field(LNK4, "$(MOTOR).SET" )
  field(DLY5, "0")
  field(DO5,  "0")
  field(LNK5, "$(MOTOR).OFF" )
  field(DLY6, "0")
  field(DOL6, "$(MOTOR).HOMD")
  field(LNK6, "$(MOTOR).OFF" )
  field(DLY7, "0")
  field(DO7,  "1")
  field(LNK7, "$(MOTOR):UPDATE_STATUS.PROC")
}

record(waveform, "$(MOTOR):CFG_FILE") {
  field(DESC, "Path & Name of Config File")
  field(FTVL, "CHAR")
  field(NELM, 256)
  field(PINI, "YES")
}

record(calcout, "$(MOTOR):CheckUpdate") {
  field(DESC, "Check Update Time")
  field(INPA, "$(MOTOR):UTC            NPP")
  field(INPB, "$(CTRL):CheckUpdate:UTC NPP")
  field(OUT,  "$(MOTOR).STUP CPP"          )
  field(CALC, "(B-A)>300 ? 1 : 0")
  field(OOPT, "When Non-zero")
  field(DOPT, "Use CALC")
  field(SCAN, "Event")
  field(EVNT, "9")
}

